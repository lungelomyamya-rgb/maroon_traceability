(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var t=e.i(43476);function i({className:e="",...i}){return(0,t.jsx)("input",{className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,...i})}e.s(["Input",()=>i])},84762,e=>{"use strict";var t=e.i(43476);function i({className:e="",...i}){return(0,t.jsx)("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,...i})}e.s(["Textarea",()=>i])},68553,e=>{"use strict";let t=(0,e.i(75254).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>t],68553)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],69074)},87082,e=>{"use strict";var t=e.i(43476),i=e.i(71645),l=e.i(53145),s=e.i(94814),a=e.i(81307),o=e.i(67881),r=e.i(23750),n=e.i(84762),d=e.i(71829),c=e.i(68553),u=e.i(69074),m=e.i(37727),h=e.i(75254);let p=(0,h.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),g=(0,h.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),x=a.z.object({type:a.z.enum(d.eventTypeValues),notes:a.z.string().optional(),location:a.z.string().optional(),timestamp:a.z.string().datetime(),photos:a.z.array(a.z.instanceof(File)).optional(),fertiliserType:a.z.string().optional(),fertiliserAmount:a.z.string().optional(),applicationMethod:a.z.string().optional(),growthStage:a.z.string().optional(),plantHeight:a.z.string().optional(),healthStatus:a.z.string().optional()});function f({productId:e,onSubmit:a}){let{register:h,handleSubmit:f,formState:{errors:b},watch:v,setValue:y}=(0,l.useForm)({resolver:(0,s.zodResolver)(x),defaultValues:{timestamp:new Date().toISOString()}}),[j,w]=(0,i.useState)(!1),[k,N]=(0,i.useState)([]),[S,M]=(0,i.useState)(navigator.onLine),F=(0,i.useRef)(null),z=v("type");(0,i.useState)(()=>{let e=()=>M(!0),t=()=>M(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}});let E=async t=>{try{if(w(!0),!S){let i={...t,productId:e,timestamp:new Date().toISOString(),syncStatus:"pending"},l=JSON.parse(localStorage.getItem("offlineEvents")||"[]");l.push(i),localStorage.setItem("offlineEvents",JSON.stringify(l)),alert("Event saved offline. It will sync when you're back online.");return}await a(t),N([]),F.current&&(F.current.value="")}catch(e){console.error("Error submitting event:",e),alert("Error saving event. Please try again.")}finally{w(!1)}};return(0,t.jsxs)("form",{onSubmit:f(E),className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 text-sm",children:S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)("span",{className:"text-green-600",children:"Online - Events will sync immediately"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{className:"h-4 w-4 text-orange-600"}),(0,t.jsx)("span",{className:"text-orange-600",children:"Offline - Events will sync when connection is restored"})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700",children:"Event Type"}),(0,t.jsx)("select",{id:"type",...h("type"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:d.eventTypes.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),b.type&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:String(b.type.message)})]}),"fertiliser"===z&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"fertiliserType",className:"block text-sm font-medium text-gray-700",children:"Fertiliser Type"}),(0,t.jsx)(r.Input,{type:"text",id:"fertiliserType",placeholder:"e.g., NPK 15-15-15",...h("fertiliserType"),className:"mt-1 block w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"fertiliserAmount",className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,t.jsx)(r.Input,{type:"text",id:"fertiliserAmount",placeholder:"e.g., 50kg per hectare",...h("fertiliserAmount"),className:"mt-1 block w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"applicationMethod",className:"block text-sm font-medium text-gray-700",children:"Application Method"}),(0,t.jsxs)("select",{id:"applicationMethod",...h("applicationMethod"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[(0,t.jsx)("option",{value:"",children:"Select method"}),(0,t.jsx)("option",{value:"broadcast",children:"Broadcast"}),(0,t.jsx)("option",{value:"foliar",children:"Foliar Spray"}),(0,t.jsx)("option",{value:"drip",children:"Drip Irrigation"}),(0,t.jsx)("option",{value:"banded",children:"Banded"})]})]})]}),"growth"===z&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-green-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"growthStage",className:"block text-sm font-medium text-gray-700",children:"Growth Stage"}),(0,t.jsxs)("select",{id:"growthStage",...h("growthStage"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[(0,t.jsx)("option",{value:"",children:"Select stage"}),(0,t.jsx)("option",{value:"seedling",children:"Seedling"}),(0,t.jsx)("option",{value:"vegetative",children:"Vegetative"}),(0,t.jsx)("option",{value:"flowering",children:"Flowering"}),(0,t.jsx)("option",{value:"fruiting",children:"Fruiting"}),(0,t.jsx)("option",{value:"mature",children:"Mature"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"plantHeight",className:"block text-sm font-medium text-gray-700",children:"Plant Height"}),(0,t.jsx)(r.Input,{type:"text",id:"plantHeight",placeholder:"e.g., 15cm",...h("plantHeight"),className:"mt-1 block w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"healthStatus",className:"block text-sm font-medium text-gray-700",children:"Health Status"}),(0,t.jsxs)("select",{id:"healthStatus",...h("healthStatus"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[(0,t.jsx)("option",{value:"",children:"Select status"}),(0,t.jsx)("option",{value:"excellent",children:"Excellent"}),(0,t.jsx)("option",{value:"good",children:"Good"}),(0,t.jsx)("option",{value:"fair",children:"Fair"}),(0,t.jsx)("option",{value:"poor",children:"Poor"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,t.jsx)(n.Textarea,{id:"notes",...h("notes"),placeholder:"Add any additional observations or details...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),(0,t.jsx)(r.Input,{type:"text",id:"location",placeholder:"Field location or GPS coordinates",...h("location"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photos (Crop Conditions, Harvest, etc.)"}),k.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:k.map((e,i)=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("img",{src:e,alt:`Preview ${i+1}`,className:"w-full h-24 object-cover rounded-lg border"}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e,t;return e=k.filter((e,t)=>t!==i),t=(v("photos")||[]).filter((e,t)=>t!==i),void(N(e),y("photos",t))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(m.X,{className:"h-3 w-3"})})]},i))}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{ref:F,type:"file",multiple:!0,accept:"image/*",capture:"environment",onChange:e=>(e=>{if(!e)return;let t=Array.from(e),i=[];t.forEach(e=>{if(e.type.startsWith("image/")){let t=URL.createObjectURL(e);i.push(t)}}),N(e=>[...e,...i]),y("photos",[...v("photos")||[],...t])})(e.target.files),className:"hidden"}),(0,t.jsxs)(o.Button,{type:"button",variant:"outline",onClick:()=>F.current?.click(),className:"flex items-center gap-2",children:[(0,t.jsx)(c.Camera,{className:"h-4 w-4"}),"Take Photo"]}),(0,t.jsxs)(o.Button,{type:"button",variant:"outline",onClick:()=>F.current?.click(),className:"flex items-center gap-2",children:[(0,t.jsx)(u.Upload,{className:"h-4 w-4"}),"Upload Photos"]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Supported formats: JPG, PNG. Max 5 photos per event."})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(o.Button,{type:"submit",disabled:j,className:"bg-indigo-600 text-white hover:bg-indigo-700",children:j?"Saving...":S?"Add Event":"Save Offline"})})]})}e.s(["EventForm",()=>f],87082)},74228,e=>{e.n(e.i(87082))}]);