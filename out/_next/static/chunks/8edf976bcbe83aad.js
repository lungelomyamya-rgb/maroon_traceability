(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84614,e=>{"use strict";let s=(0,e.i(75254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],84614)},84762,e=>{"use strict";var s=e.i(43476);function r({className:e="",...r}){return(0,s.jsx)("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,...r})}e.s(["Textarea",()=>r])},67881,e=>{"use strict";var s=e.i(43476);function r({className:e="",variant:r="outline",size:t="default",children:l,...i}){let a=/bg-\w+-\d+|text-\w+-\d+/.test(e);return(0,s.jsx)("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background ${a?"":({default:"bg-primary text-primary-foreground hover:bg-primary/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-blue text-white hover:bg-blue-hover",ghost:"hover:bg-accent hover:text-accent-foreground"})[r]} ${{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}[t]} ${e}`,...i,children:l})}e.s(["Button",()=>r])},70065,e=>{"use strict";var s=e.i(43476);function r({children:e,className:r="",variant:t="default",title:l,description:i,badge:a}){return(0,s.jsxs)("div",{className:`rounded-lg border bg-card text-card-foreground shadow-sm ${{default:"border-border",outline:"border-2 border-border",ghost:"border-transparent bg-transparent",success:"border-green-200 bg-green-50",warning:"border-yellow-200 bg-yellow-50",danger:"border-red-200 bg-red-50"}[t]} ${r}`,children:[(l||i||a)&&(0,s.jsx)("div",{className:"p-6 pb-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[l&&(0,s.jsx)("h3",{className:"text-lg font-semibold leading-none tracking-tight",children:l}),i&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:i})]}),a&&(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${"destructive"===a.variant?"bg-red-100 text-red-800":"success"===a.variant?"bg-green-100 text-green-800":"warning"===a.variant?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:a.text})]})}),(0,s.jsx)("div",{className:"p-6 pt-0",children:e})]})}function t({children:e,className:r=""}){return(0,s.jsx)("div",{className:`p-6 pt-0 ${r}`,children:e})}e.s(["Card",()=>r,"CardContent",()=>t])},59607,e=>{"use strict";let s=(0,e.i(75254).default)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],59607)},23750,e=>{"use strict";var s=e.i(43476);function r({className:e="",...r}){return(0,s.jsx)("input",{className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,...r})}e.s(["Input",()=>r])},19233,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(18566),l=e.i(52155),i=e.i(53145),a=e.i(94814),n=e.i(81307),o=e.i(67881),d=e.i(23750),c=e.i(84762),m=e.i(70065),u=e.i(15788),g=e.i(84614),x=e.i(88844),b=e.i(59607),h=e.i(71829);let p=n.z.object({type:n.z.enum(h.eventTypeValues),notes:n.z.string().optional(),location:n.z.string().optional(),timestamp:n.z.string().datetime(),photos:n.z.array(n.z.instanceof(File)).optional(),vehicleId:n.z.string().optional(),driverId:n.z.string().optional(),transportReference:n.z.string().optional(),collectionDate:n.z.string().optional(),deliveryDate:n.z.string().optional(),routeDetails:n.z.string().optional(),cargoCondition:n.z.string().optional(),temperatureReading:n.z.string().optional(),mileage:n.z.string().optional(),fuelLevel:n.z.string().optional(),vehicleCondition:n.z.string().optional()}),f=["collection","transport","delivery"],v=["Excellent","Good","Fair","Poor","Damaged","Temperature Issue","Packaging Issue"];function y({productId:e,onSubmit:t,vehicles:l=[],drivers:n=[],initialData:y}){let j,{register:N,handleSubmit:k,formState:{errors:w},watch:D,setValue:T}=(0,i.useForm)({resolver:(0,a.zodResolver)(p),defaultValues:{timestamp:new Date().toISOString(),...y}}),[C,I]=(0,r.useState)(!1),z=D("type"),S=f.includes(z),R=async e=>{try{I(!0),await t(e)}catch(e){console.error("Error submitting event:",e)}finally{I(!1)}},E=e=>l.find(s=>s.id===e),L=e=>n.find(s=>s.id===e);return(0,s.jsxs)(m.Card,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,s.jsx)("div",{className:"p-2 bg-sky-100 rounded-lg",children:(0,s.jsx)(u.Truck,{className:"h-5 w-5 text-sky-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Logistics Event"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Record transport and logistics activities"})]})]}),(0,s.jsxs)("form",{onSubmit:k(R),className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),(0,s.jsxs)("select",{...N("type"),className:"w-full p-2 border border-gray-300 rounded-md focus:border-blue-500 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Select event type"}),h.eventTypes.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),w.type&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.type.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),(0,s.jsx)(d.Input,{type:"datetime-local",...N("timestamp"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),w.timestamp&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.timestamp.message})]})]}),S&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(u.Truck,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)("h4",{className:"font-medium text-blue-900",children:"Transport Information"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle"}),(0,s.jsxs)("select",{...N("vehicleId"),className:"w-full p-2 border border-gray-300 rounded-md focus:border-blue-500 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Select vehicle"}),l.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.make," ",e.model," (",e.registrationNumber,")"]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Driver"}),(0,s.jsxs)("select",{...N("driverId"),className:"w-full p-2 border border-gray-300 rounded-md focus:border-blue-500 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Select driver"}),n.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.phone,")"]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport Reference"}),(0,s.jsx)(d.Input,{...N("transportReference"),placeholder:"e.g., TR-2025-001234",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Collection Date"}),(0,s.jsx)(d.Input,{type:"datetime-local",...N("collectionDate"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Delivery Date"}),(0,s.jsx)(d.Input,{type:"datetime-local",...N("deliveryDate"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Details"}),(0,s.jsx)(c.Textarea,{...N("routeDetails"),rows:2,placeholder:"e.g., Cape Town → Johannesburg via N1, estimated 15 hours",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(b.AlertTriangle,{className:"h-5 w-5 text-green-600"}),(0,s.jsx)("h4",{className:"font-medium text-green-900",children:"Vehicle Status"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mileage (km)"}),(0,s.jsx)(d.Input,{type:"number",...N("mileage"),placeholder:"e.g., 125500",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuel Level (%)"}),(0,s.jsx)(d.Input,{type:"number",...N("fuelLevel"),placeholder:"e.g., 75",min:"0",max:"100",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temperature (°C)"}),(0,s.jsx)(d.Input,{...N("temperatureReading"),placeholder:"e.g., 4.5",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Condition"}),(0,s.jsx)(c.Textarea,{...N("vehicleCondition"),rows:2,placeholder:"e.g., All systems operational, tires in good condition, refrigeration unit functioning properly",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(x.Package,{className:"h-5 w-5 text-yellow-600"}),(0,s.jsx)("h4",{className:"font-medium text-yellow-900",children:"Cargo Condition"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cargo Condition"}),(0,s.jsxs)("select",{...N("cargoCondition"),className:"w-full p-2 border border-gray-300 rounded-md focus:border-blue-500 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Select condition"}),v.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cargo Notes"}),(0,s.jsx)(c.Textarea,{...N("notes"),rows:3,placeholder:"Detailed notes about cargo condition, handling requirements, special observations...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,s.jsx)(d.Input,{...N("location"),placeholder:"e.g., Green Valley Farm, Stellenbosch",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photos"}),(0,s.jsx)(d.Input,{type:"file",multiple:!0,accept:"image/*",onChange:e=>{T("photos",Array.from(e.target.files||[]))},className:"mt-1 block w-full"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload photos of cargo, vehicle condition, or documentation"})]})]}),S&&(D("vehicleId")||D("driverId"))&&(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Selected Resources"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[D("vehicleId")&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.Truck,{className:"h-5 w-5 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Vehicle"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:(j=E(D("vehicleId")||""))?`${j.make||""} ${j.model||""}`.trim():""}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:E(D("vehicleId")||"")?.registrationNumber||""})]})]}),D("driverId")&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g.User,{className:"h-5 w-5 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Driver"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:L(D("driverId")||"")?.name||""}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:L(D("driverId")||"")?.phone||""})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(o.Button,{type:"button",variant:"outline",onClick:()=>{},children:"Cancel"}),(0,s.jsx)(o.Button,{type:"submit",disabled:C,className:"bg-sky-600 text-white hover:bg-sky-700",children:C?"Submitting...":"Record Event"})]})]})]})}var j=e.i(127);function N(){let{currentUser:e}=(0,l.useUser)(),i=(0,t.useRouter)(),[a,n]=(0,r.useState)([]),[o,d]=(0,r.useState)([]);return((0,r.useEffect)(()=>{e?.role!=="logistics"?i.push("/unauthorized"):(n([{id:"veh1",registrationNumber:"CA 123456",make:"Mercedes-Benz",model:"Actros 1845",year:2022,type:"truck",capacity:28e3,status:"active",currentDriver:"driver1",lastMaintenance:"2025-01-15",nextMaintenance:"2025-04-15",insuranceExpiry:"2025-12-31",registrationExpiry:"2026-03-31",features:["GPS Tracking","Air Suspension","Sleeping Cabin"],location:{lat:-33.9249,lng:18.4241}},{id:"veh2",registrationNumber:"CA 789012",make:"Isuzu",model:"NPR 300",year:2021,type:"refrigerated",capacity:3500,status:"available",lastMaintenance:"2025-01-10",nextMaintenance:"2025-04-10",insuranceExpiry:"2025-11-30",registrationExpiry:"2026-02-28",features:["Temperature Control","Refrigerated","GPS Tracking"],location:{lat:-33.8688,lng:18.5058}}]),d([{id:"driver1",name:"John Smith",phone:"+27 83 123 4567",email:"john.smith@logistics.co.za",licenseNumber:"DL12345678901",licenseExpiry:"2025-12-31",certifications:["Commercial Driver License","Refrigerated Goods","Food Safety Handling"],status:"on-delivery",currentVehicle:"veh1",currentLocation:{lat:-33.9249,lng:18.4241},experience:8,rating:4.8,totalDeliveries:342,onTimeDeliveryRate:96.5},{id:"driver2",name:"Maria Johnson",phone:"+27 82 987 6543",email:"maria.j@logistics.co.za",licenseNumber:"DL98765432109",licenseExpiry:"2026-03-15",certifications:["Commercial Driver License","Hazardous Materials","Defensive Driving"],status:"available",currentLocation:{lat:-33.8688,lng:18.5058},experience:5,rating:4.6,totalDeliveries:189,onTimeDeliveryRate:94.2}]))},[e,i]),e&&"logistics"===e.role)?(0,s.jsx)(j.DashboardLayout,{title:"Logistics Events",subtitle:"Record transport events, collections, and delivery activities",children:(0,s.jsx)(y,{productId:"PRD-2024-001",onSubmit:async e=>{console.log("Enhanced event submitted:",e)},vehicles:a,drivers:o})}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-primary"})})}e.s(["default",()=>N],19233)}]);