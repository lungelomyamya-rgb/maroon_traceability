{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/maroon_traceability_demo/proxy.ts"],"sourcesContent":["// src/middleware.ts\r\nimport { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\n// List of public routes that don't require authentication\r\nconst publicRoutes = ['/login', '/unauthorized', '/viewer'];\r\n\r\n// List of protected routes that require authentication\r\nconst protectedRoutes = ['/farmer', '/retailer', '/inspector', '/logistics', '/packaging'];\r\n\r\n// List of static files and API routes to exclude\r\nconst staticFiles = [\r\n  '/_next',\r\n  '/favicon.ico',\r\n  '/api',\r\n  '/_vercel',\r\n  '/vercel.svg',\r\n  '/vercel.svg?width=180&height=180',\r\n  '/(.*)\\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|mp4|webm|wav|mp3|m4a|aac|oga)$',\r\n];\r\n\r\nexport function proxy(request: NextRequest) {\r\n  const { pathname } = request.nextUrl;\r\n  \r\n  // Skip middleware for public routes and static files\r\n  if (\r\n    publicRoutes.some(route => pathname.startsWith(route)) ||\r\n    staticFiles.some(staticFile => pathname.startsWith(staticFile)) ||\r\n    staticFiles.some(staticFile => new RegExp(staticFile).test(pathname))\r\n  ) {\r\n    return NextResponse.next();\r\n  }\r\n\r\n  // Check if this is a protected route\r\n  const isProtectedRoute = protectedRoutes.some(route => pathname.startsWith(route));\r\n  \r\n  if (isProtectedRoute) {\r\n    // For protected routes, let client-side auth handle the checks\r\n    return NextResponse.next();\r\n  }\r\n\r\n  // Let all routes pass through to client-side routing\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    '/((?!_next/static|_next/image|favicon.ico|.*\\..*).*)',\r\n  ],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA,oBAAoB;AACpB;;AAGA,0DAA0D;AAC1D,MAAM,eAAe;IAAC;IAAU;IAAiB;CAAU;AAE3D,uDAAuD;AACvD,MAAM,kBAAkB;IAAC;IAAW;IAAa;IAAc;IAAc;CAAa;AAE1F,iDAAiD;AACjD,MAAM,cAAc;IAClB;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,SAAS,MAAM,OAAoB;IACxC,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,qDAAqD;IACrD,IACE,aAAa,IAAI,CAAC,CAAA,QAAS,SAAS,UAAU,CAAC,WAC/C,YAAY,IAAI,CAAC,CAAA,aAAc,SAAS,UAAU,CAAC,gBACnD,YAAY,IAAI,CAAC,CAAA,aAAc,IAAI,OAAO,YAAY,IAAI,CAAC,YAC3D;QACA,OAAO,8IAAY,CAAC,IAAI;IAC1B;IAEA,qCAAqC;IACrC,MAAM,mBAAmB,gBAAgB,IAAI,CAAC,CAAA,QAAS,SAAS,UAAU,CAAC;IAE3E,IAAI,kBAAkB;QACpB,+DAA+D;QAC/D,OAAO,8IAAY,CAAC,IAAI;IAC1B;IAEA,qDAAqD;IACrD,OAAO,8IAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;KACD;AACH"}}]
}