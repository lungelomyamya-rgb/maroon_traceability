(this.webpackJsonp=this.webpackJsonp||[]).push([[552],{7066:function(e,s,t){Promise.resolve().then(t.bind(t,8942))},8942:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var r=t(3827),a=t(4090),l=t(7907),i=t(3899),n=t(5671),c=t(575),d=t(2782),o=t(2169);let u=a.forwardRef((e,s)=>{let{className:t,children:a,required:l,...i}=e;return(0,r.jsx)("label",{ref:s,className:(0,o.cn)("block text-sm font-medium text-foreground mb-1",l&&"after:content-['*'] after:ml-0.5 after:text-destructive",t),...i,children:a})});u.displayName="Label";var m=t(7307),x=t(3428),p=t(2235),h=t(6664);function f(e){let{onDocumentsVerified:s,onFilesUploaded:t,documentTypes:l,required:i=!0}=e,[d,o]=(0,a.useState)({}),[u,m]=(0,a.useState)([]);(0,a.useEffect)(()=>()=>{u.forEach(e=>URL.revokeObjectURL(e.preview))},[u]);let f=e=>{let t=[...u];URL.revokeObjectURL(t[e].preview),t.splice(e,1),m(t);let r={...d};delete r[u[e].name],o(r),s(l.every(e=>r[e.label]))};return(0,r.jsxs)(n.Zb,{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Document Verification"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:i?"Please upload the required documents to verify this product.":"Additional supporting documents (optional)"})]}),(0,r.jsx)(h.S,{documentTypes:l,onUpload:e=>{let r=e.map(e=>{let s=e.file;return{...s,preview:URL.createObjectURL(s),type:e.type}});m(e=>[...e,...r]);let a={...d};e.forEach(e=>{a[e.type]=!0}),o(a),s(l.every(e=>a[e.value])),t&&t(e.map(e=>e.file))},multiple:!0}),u.length>0&&(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium",children:"Uploaded Documents"}),(0,r.jsx)("div",{className:"space-y-2",children:u.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-muted rounded",children:(0,r.jsx)(x.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium truncate max-w-xs",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[Math.round(e.size/1024)," KB \xb7 ",e.type]})]})]}),(0,r.jsxs)(c.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(s),className:"h-8 w-8 p-0",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Remove file"})]})]},s))})]}),i&&l.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Required Documents"}),(0,r.jsx)("ul",{className:"space-y-1 text-sm text-muted-foreground",children:l.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 ".concat(d[e.label]?"bg-green-500":"bg-gray-300")}),e.label]},s))})]})]})}var v=t(3125);let b=["Fruits","Vegetables","Grains","Dairy","Meat","Poultry","Seafood","Nuts","Herbs","Spices"],j=[{value:"certification",label:"Production Records"},{value:"certification",label:"Quality Certificate"},{value:"certification",label:"Safety Inspection Report"},{value:"certification",label:"Proof of Origin"}];function g(){let e=(0,l.useRouter)(),{userRole:s}=(0,i.useUser)(),[t,o]=(0,a.useState)({productName:"",category:"",batchNumber:"",productionDate:new Date,quantity:"",unit:"kg",description:""}),[h,g]=(0,a.useState)(!1),[N,y]=(0,a.useState)(!1),[w,C]=(0,a.useState)([]),[R,U]=(0,a.useState)(!1);if("farmer"!==s)return e.push("/unauthorized"),null;let k=e=>{let s=[...w];URL.revokeObjectURL(s[e].preview),s.splice(e,1),C(s)},P=async s=>{if(s.preventDefault(),!h){alert("Please upload and verify all required documents");return}if(!t.category){alert("Please select a product category");return}y(!0);try{console.log("Form submitted:",{...t,files:w.map(e=>({name:e.name,type:e.type,size:e.size}))}),e.push("/farmer/dashboard?certified=success")}catch(e){console.error("Error submitting form:",e)}finally{y(!1)}};return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Certify New Product"}),(0,r.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Complete the form and upload required documents to certify your product"})]}),(0,r.jsx)(n.Zb,{className:"p-4",children:(0,r.jsxs)("form",{onSubmit:P,className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(u,{htmlFor:"productName",children:["Product Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(d.I,{id:"productName",value:t.productName,onChange:e=>o({...t,productName:e.target.value}),placeholder:"Enter product name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(u,{children:["Product Category ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:t.category,onChange:e=>o({...t,category:e.target.value}),className:"flex h-9 w-full appearance-none rounded-md border border-gray-300 bg-white pl-2.5 pr-7 py-1.5 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select a category"}),b.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-muted-foreground",children:(0,r.jsx)("path",{d:"M4.18179 6.18181C4.35753 6.00608 4.64245 6.00608 4.81819 6.18181L7.49999 8.86362L10.1818 6.18181C10.2663 6.09731 10.3806 6.04999 10.5 6.04999C10.6194 6.04999 10.7337 6.09731 10.8182 6.18181C10.9027 6.26632 10.95 6.38062 10.95 6.50001C10.95 6.6194 10.9027 6.7337 10.8182 6.81821L7.81819 9.81821C7.73368 9.90272 7.61938 9.95004 7.49999 9.95004C7.3806 9.95004 7.2663 9.90272 7.18179 9.81821L4.18179 6.81821C4.09728 6.7337 4.04996 6.6194 4.04996 6.50001C4.04996 6.38062 4.09728 6.26632 4.18179 6.18181Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(u,{htmlFor:"batchNumber",children:["Batch Number ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(d.I,{id:"batchNumber",value:t.batchNumber,onChange:e=>o({...t,batchNumber:e.target.value}),placeholder:"Enter batch number",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)(u,{className:"text-sm",children:["Production Date ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.I,{type:"text",value:(0,v.WU)(t.productionDate,"PPP"),readOnly:!0,className:"pr-10 cursor-pointer",onClick:()=>U(!R)}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none",children:(0,r.jsx)(m.Z,{className:"h-5 w-5 text-muted-foreground"})}),R&&(0,r.jsx)("div",{className:"absolute z-10 mt-1 bg-white border rounded-md shadow-lg",children:(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)("input",{type:"date",className:"block w-full p-2 border rounded",value:t.productionDate.toISOString().split("T")[0],onChange:e=>{e.target.valueAsDate&&(o({...t,productionDate:e.target.valueAsDate}),U(!1))},onKeyDown:e=>"Escape"===e.key&&U(!1),autoFocus:!0})})})]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)(u,{htmlFor:"quantity",className:"text-sm",children:["Quantity ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(d.I,{type:"number",id:"quantity",value:t.quantity,onChange:e=>o({...t,quantity:e.target.value}),min:"1",placeholder:"Enter quantity",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)(u,{htmlFor:"unit",className:"text-sm",children:["Unit ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:t.unit,onChange:e=>o({...t,unit:e.target.value}),className:"flex h-9 w-full appearance-none rounded-md border border-gray-300 bg-white pl-2.5 pr-7 py-1.5 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[(0,r.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,r.jsx)("option",{value:"g",children:"Grams (g)"}),(0,r.jsx)("option",{value:"lbs",children:"Pounds (lbs)"}),(0,r.jsx)("option",{value:"oz",children:"Ounces (oz)"}),(0,r.jsx)("option",{value:"units",children:"Units"})]}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-muted-foreground",children:(0,r.jsx)("path",{d:"M4.18179 6.18181C4.35753 6.00608 4.64245 6.00608 4.81819 6.18181L7.49999 8.86362L10.1818 6.18181C10.2663 6.09731 10.3806 6.04999 10.5 6.04999C10.6194 6.04999 10.7337 6.09731 10.8182 6.18181C10.9027 6.26632 10.95 6.38062 10.95 6.50001C10.95 6.6194 10.9027 6.7337 10.8182 6.81821L7.81819 9.81821C7.73368 9.90272 7.61938 9.95004 7.49999 9.95004C7.3806 9.95004 7.2663 9.90272 7.18179 9.81821L4.18179 6.81821C4.09728 6.7337 4.04996 6.6194 4.04996 6.50001C4.04996 6.38062 4.09728 6.26632 4.18179 6.18181Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(u,{htmlFor:"description",children:"Product Description"}),(0,r.jsx)("textarea",{id:"description",value:t.description,onChange:e=>o({...t,description:e.target.value}),rows:3,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter product description (optional)"})]}),(0,r.jsxs)("div",{className:"pt-4",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-foreground mb-4",children:"Required Documents"}),(0,r.jsx)(f,{onDocumentsVerified:g,documentTypes:j,required:!0,onFilesUploaded:e=>{let s=e.map(e=>({...e,preview:URL.createObjectURL(e)}));C(e=>[...e,...s])}}),w.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Uploaded Documents"}),(0,r.jsx)("div",{className:"space-y-2",children:w.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"p-2 bg-muted rounded",children:(0,r.jsx)(x.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("p",{className:"font-medium truncate max-w-xs",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[Math.round(e.size/1024)," KB \xb7 ",e.type]})]})]}),(0,r.jsx)(c.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>k(s),className:"h-8 w-8",children:(0,r.jsx)(p.Z,{className:"h-4 w-4"})})]},s))})]})]}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsx)(c.z,{type:"submit",disabled:N||!h,className:"min-w-[120px]",children:N?"Certifying...":"Certify Product"})})]})})]})})}},2782:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var r=t(3827),a=t(4090),l=t(2169);let i=a.forwardRef((e,s)=>{let{className:t,type:i,label:n,error:c,icon:d,id:o,...u}=e,m=a.useId(),x=o||"input-".concat(m);return(0,r.jsxs)("div",{className:"w-full space-y-1.5",children:[n&&(0,r.jsx)("label",{htmlFor:x,className:"block text-sm font-medium text-foreground",children:n}),(0,r.jsxs)("div",{className:"relative",children:[d&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-muted-foreground",children:d}),(0,r.jsx)("input",{type:i,id:x,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","placeholder:text-muted-foreground/60","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","transition-colors",d&&"pl-10",c&&"border-destructive focus-visible:ring-destructive/50",t),ref:s,...u})]}),c&&(0,r.jsx)("p",{className:"text-sm text-destructive",id:"".concat(x,"-error"),children:c})]})});i.displayName="Input"},3899:function(e,s,t){"use strict";t.r(s),t.d(s,{UserProvider:function(){return i},useUser:function(){return n}});var r=t(3827),a=t(4090);let l=(0,a.createContext)(void 0);function i(e){let{children:s}=e,[t,i]=(0,a.useState)("farmer");return(0,r.jsx)(l.Provider,{value:{userRole:t,setUserRole:i},children:s})}function n(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}}},function(e){e.O(0,[150,232,175,971,69,744],function(){return e(e.s=7066)}),_N_E=e.O()}]);